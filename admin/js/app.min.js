jQuery(document).ready(function(a){const t=ind_alt_tag_manager_admin_ajax.i18n;a("body").on("click",".ind-alt-tag-img",function(){let t=a(this).attr("src");!function(t){let n=a("<div>",{class:"ind-alt-modal-container"}).append(a("<div>",{class:"ind-alt-modal-inside-container"}).append(a("<button>",{class:"ind-alt-modal-close",text:"X"})).append(t));a("body").append(n)}(a("<img>",{class:"ind-alt-modal-img",src:t}))}),a("body").on("click","#ind-alt-tag-manager-admin-update-form",function(t){t.preventDefault(),"Close Form"===a(this).text()?a(this).text("Update Form"):a(this).text("Close Form"),a(".ind-alt-tag-manager-update-form-container").slideToggle()}),a("body").on("click",".ind-alt-tag-save",function(){let n=a(this).data("id"),e=a("#ind-alt-tag-alt"+n).val();a.ajax({url:ind_alt_tag_manager_admin_ajax.ajaxurl,dataType:"json",method:"POST",data:{action:"ind_alt_tag_manager_update_alt_tag",data:{id:n,alt:e},nonce:ind_alt_tag_manager_admin_ajax.ind_alt_tag_manager_admin_nonce}}).done(function(e){if(e.success&&e.data.updated){let t=a("<div>",{class:"alt-image-overlay"}).append(a("<img>",{src:ind_alt_tag_manager_admin_ajax.pluginUrl+"images/checkmark.png",alt:"checkmark"}));a(".ind-alt-tag-manager-container").find("[data-id="+n+"]").after(t)}else alert(t.saveFailed)}).fail(function(){alert(t.errorGeneric)})}),a("body").on("click",".ind-alt-tag-more",function(){let n=a(this),e=n.data("page"),d=n.data("per-page"),i=n.data("total"),o=e+1;n.prop("disabled",!0).text(t.loading),a.ajax({url:ind_alt_tag_manager_admin_ajax.ajaxurl,dataType:"json",method:"POST",data:{action:"ind_alt_tag_manager_load_more_images",page:o,per_page:d,nonce:ind_alt_tag_manager_admin_ajax.ind_alt_tag_manager_admin_nonce}}).done(function(e){if(e.success&&e.data.html){a(".ind-alt-tag-manager-container").append(e.data.html),n.data("page",o),n.prop("disabled",!1).text(t.loadMore),o*d>=i&&n.remove()}else alert(t.noMoreImages),n.remove()}).fail(function(){alert(t.loadError),n.prop("disabled",!1).text(t.loadMore)})}),a("body").on("click",".ind-alt-modal-close",function(){a(".ind-alt-modal-container").remove()}),a("body").on("click",".ind-alt-modal-container",function(t){a(t.target).hasClass("ind-alt-modal-container")&&a(".ind-alt-modal-container").remove()}),a(document).on("keydown",function(t){"Escape"===t.key&&a(".ind-alt-modal-container").remove()})});